{"version":3,"sources":["components/List.js","pages/History.js"],"names":["Img","styled","Zmage","LinkContainer","div","TitleContainer","InfiniteContainer","LoadingContainer","Component","observer","HistoryStore","useStores","useEffect","console","log","reset","initialLoad","pageStart","loadMore","find","hasMore","isLoading","useWindow","dataSource","list","renderItem","item","Item","id","src","attributes","url","style","height","alt","filename","target","href","rel","type","onClick","delete","then","results","dom","document","getElementById","remove","tip","History","List"],"mappings":"4QAQMA,EAAMC,YAAOC,IAAPD,CAAH,uFAMHE,EAAgBF,IAAOG,IAAV,sHAObC,EAAiBJ,IAAOG,IAAV,oOAadE,EAAoBL,IAAOG,IAAV,kJAQjBG,EAAmBN,IAAOG,IAAV,2GAqFPI,EA9EGC,aAAS,WAAO,IACxBC,EAAiBC,cAAjBD,aAqBR,OAPAE,qBAAU,WACR,OAAO,WACLC,QAAQC,IAAI,gBACZJ,EAAaK,WAEd,CAACL,IAGF,cAACJ,EAAD,UACE,cAAC,IAAD,CACEU,aAAa,EACbC,UAAW,EACXC,SAxBW,WACfR,EAAaS,QAwBTC,SAAUV,EAAaW,WAAaX,EAAaU,QACjDE,WAAW,EALb,SAOE,mBACEC,WAAYb,EAAac,KACzBC,WAAY,SAACC,GAAD,OACV,mBAAMC,KAAN,CAAyBC,GAAE,UAAKF,EAAKE,IAArC,UACE,8BACE,cAAC5B,EAAD,CACE6B,IAAKH,EAAKI,WAAWC,IAAID,WAAWC,IACpCC,MAAO,CAAEC,OAAQ,SACjBC,IAAI,OAGR,cAAC7B,EAAD,UACE,6BAAKqB,EAAKI,WAAWK,aAEvB,cAAChC,EAAD,UACE,mBACEiC,OAAQ,SACRC,KAAMX,EAAKI,WAAWC,IAAID,WAAWC,IACrCO,IAAI,sBAHN,SAKGZ,EAAKI,WAAWC,IAAID,WAAWC,QAGpC,8BACE,mBACEQ,KAAK,UACLC,QAAS,WAlDN,IAACZ,IAmDSF,EAAKE,GAlDhClB,EAAa+B,OAAOb,GAAIc,MAAK,SAACC,GAC5B,IAAIC,EAAMC,SAASC,eAAT,UAA2BlB,IACrCgB,EAAIG,SACJH,EAAM,SA4CI,0CArBYlB,EAAKE,KAHzB,SAoCGlB,EAAaW,WAAaX,EAAaU,SACtC,cAACb,EAAD,UACE,mBAAMyC,IAAK,kCC1GVC,UATf,WACE,OACE,qCACE,yCACA,cAACC,EAAD","file":"static/js/11.e7da928a.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { useStores } from \"../stores\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport { List, Spin, Button } from \"antd\";\nimport styled from \"styled-components\";\nimport Zmage from \"react-zmage\";\n\nconst Img = styled(Zmage)`\n  width: 100px;\n  height: 100px;\n  object-fit: contain;\n`;\n\nconst LinkContainer = styled.div`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 500px;\n`;\n\nconst TitleContainer = styled.div`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  h5 {\n    margin: 0;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    width: 200px;\n  }\n`;\n\nconst InfiniteContainer = styled.div`\n  height: 60vh;\n  padding: 0 12px 8px 12px;\n  overflow: auto;\n  border: 1px solid #e8e8e8;\n  border-radius: 4px;\n`;\n\nconst LoadingContainer = styled.div`\n  position: absolute;\n  bottom: 40px;\n  width: 100%;\n  text-align: center;\n`;\n\nconst Component = observer(() => {\n  const { HistoryStore } = useStores();\n\n  const loadMore = () => {\n    HistoryStore.find();\n  };\n\n  const deleteItem = (id) => {\n    HistoryStore.delete(id).then((results) => {\n      let dom = document.getElementById(`${id}`);\n      dom.remove();\n      dom = null\n    });\n  };\n\n  useEffect(() => {\n    return () => {\n      console.log(\"卸载\");\n      HistoryStore.reset();\n    };\n  }, [HistoryStore]);\n\n  return (\n    <InfiniteContainer>\n      <InfiniteScroll\n        initialLoad={true}\n        pageStart={0}\n        loadMore={loadMore}\n        hasMore={!HistoryStore.isLoading && HistoryStore.hasMore}\n        useWindow={false}\n      >\n        <List\n          dataSource={HistoryStore.list}\n          renderItem={(item) => (\n            <List.Item key={item.id} id={`${item.id}`}>\n              <div>\n                <Img\n                  src={item.attributes.url.attributes.url}\n                  style={{ height: \"100px\" }}\n                  alt=\"\"\n                />\n              </div>\n              <TitleContainer>\n                <h5>{item.attributes.filename}</h5>\n              </TitleContainer>\n              <LinkContainer>\n                <a\n                  target={\"_blank\"}\n                  href={item.attributes.url.attributes.url}\n                  rel=\"noreferrer noopener\"\n                >\n                  {item.attributes.url.attributes.url}\n                </a>\n              </LinkContainer>\n              <div>\n                <Button\n                  type=\"primary\"\n                  onClick={() => {\n                    deleteItem(item.id);\n                  }}\n                >\n                  删除记录\n                </Button>\n              </div>\n            </List.Item>\n          )}\n        >\n          {HistoryStore.isLoading && HistoryStore.hasMore && (\n            <LoadingContainer>\n              <Spin tip={\"加载中\"} />\n            </LoadingContainer>\n          )}\n        </List>\n      </InfiniteScroll>\n    </InfiniteContainer>\n  );\n});\n\nexport default Component;\n","import React from \"react\";\nimport List from \"../components/List\";\n\nfunction History() {\n  return (\n    <>\n      <h1>History</h1>\n      <List />\n    </>\n  );\n}\n\nexport default History;\n"],"sourceRoot":""}