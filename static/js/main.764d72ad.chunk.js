(this["webpackJsonpepic-react"]=this["webpackJsonpepic-react"]||[]).push([[5],{102:function(e,t,n){},110:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var r,o=n(0),i=n(25),c=n.n(i),a=(n(102),n(9)),s=n(34),u=n(35),l=n(3),p=u.a.footer(r||(r=Object(s.a)(["\n  padding: 10px 10px;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n"])));var b,f,j,h,O=function(){return Object(l.jsx)(p,{children:Object(l.jsx)("h1",{children:"Image Upload"})})},d=n(96),m=(n(97),n(76)),y=n.p+"static/media/logo.e711194f.svg",g=n.p+"static/media/close.8ad3c224.svg",w=n.p+"static/media/open.1b3c9219.svg",v=n(45),x=n(77),U=n(79);var P="flex flex-wrap flex-row justify-between md:items-center md:space-x-4 bg-white py-6 px-6 relative",k="block",z="h-6 md:h-8",D="inline-block md:hidden w-8 h-8 rounded bg-white text-blue-300 p-1",F="absolute md:relative top-16 left-0 md:top-0 z-20 md:flex flex-col md:flex-row md:space-x-6 font-semibold w-full md:w-auto bg-white shadow-md rounded-lg md:rounded-none md:shadow-none md:bg-transparent p-6 pt-0 md:p-0",C="block py-1 text-gray-600 hover:underline",N="text-blue-400",S=u.a.img(b||(b=Object(s.a)(["\n  @media (max-width: 768px) {\n    position: relative;\n    top: 3px;\n  }\n"]))),I=Object(u.a)(v.b)(f||(f=Object(s.a)([""]))),L=u.a.div(j||(j=Object(s.a)([""]))),M=Object(u.a)(m.a)(h||(h=Object(s.a)(["\n  border-radius: 0.25rem;\n"]))),H=Object(U.a)((function(){var e=Object(a.f)(),t=Object(x.a)(),n=t.UserStore,r=t.AuthStore,i=Object(o.useState)(!1),c=Object(d.a)(i,2),s=c[0],u=c[1],p=function(e){u(!0===e||!s)};return window.addEventListener("resize",function(e,t){var n=null;return function(){var r=this,o=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(r,o)}),t)}}((function(){document.documentElement.clientWidth<768&&p(!0)}),100)),Object(o.useEffect)((function(){p(!0)}),[]),Object(l.jsxs)("header",{className:P,children:[Object(l.jsx)("a",{className:k,onClick:function(){p(!0),e.push("/")},children:Object(l.jsx)(S,{className:z,src:y,alt:""})}),Object(l.jsx)("button",{id:"hamburger",className:D,onClick:p,children:s?Object(l.jsx)("img",{src:w,alt:""}):Object(l.jsx)("img",{src:g,alt:""})}),Object(l.jsxs)("nav",{className:"".concat(F," ").concat(s?"hidden":""),children:[Object(l.jsx)(I,{className:C,to:"/",activeClassName:N,exact:!0,onClick:function(){p(!0)},children:"\u9996\u9875"}),Object(l.jsx)(I,{className:C,to:"/history",activeClassName:N,onClick:function(){p(!0)},children:"\u4e0a\u4f20\u5386\u53f2"}),Object(l.jsx)(I,{className:C,to:"/about",activeClassName:N,onClick:function(){p(!0)},children:"\u5173\u4e8e\u6211"}),Object(l.jsx)(L,{children:n.currentUser?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("span",{className:"mr-1",children:n.currentUser.attributes.username}),Object(l.jsx)(M,{type:"primary",onClick:function(){r.logout(),console.log("\u7528\u6237\u6ce8\u9500"),e.push("/")},children:"\u6ce8\u9500"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(M,{className:"mr-1",type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),p(!0),e.push("/login")},children:"\u767b\u5f55"}),Object(l.jsx)(M,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),p(!0),e.push("/register")},children:"\u6ce8\u518c"})]})})]})]})}));var A=function(){return Object(l.jsx)("div",{children:"Loading..."})},E=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(4),n.e(9),n.e(12)]).then(n.bind(null,267))})),J=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(8),n.e(11)]).then(n.bind(null,268))})),K=Object(o.lazy)((function(){return n.e(10).then(n.bind(null,264))})),T=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(13)]).then(n.bind(null,265))})),X=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(14)]).then(n.bind(null,266))}));var W=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(H,{}),Object(l.jsx)("main",{className:"py-6 px-6",children:Object(l.jsx)(o.Suspense,{fallback:Object(l.jsx)(A,{}),children:Object(l.jsxs)(a.c,{children:[Object(l.jsx)(a.a,{path:"/",exact:!0,component:E}),Object(l.jsx)(a.a,{path:"/history",exact:!0,component:J}),Object(l.jsx)(a.a,{path:"/about",exact:!0,component:K}),Object(l.jsx)(a.a,{path:"/login",exact:!0,component:T}),Object(l.jsx)(a.a,{path:"/register",exact:!0,component:X})]})})}),Object(l.jsx)(O,{})]})};n(110),n(111);c.a.render(Object(l.jsx)(v.a,{children:Object(l.jsx)(W,{})}),document.getElementById("root"))},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var r=n(0),o=(n(66),n(18)),i=n(19),c=n(30),a=n(31),s=n(6),u=(n(56),n(2)),l=n(23),p=n.n(l);p.a.init({appId:"XlO937XedHKgzxM3pXiJxi2p-gzGzoHsz",appKey:"hcHtM6kF4vSwdagKmaaCVe8s",serverURL:"https://xlo937xe.lc-cn-n1-shared.com"});var b,f,j=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},h=function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},O=function(){l.User.logOut()},d=function(){return l.User.current()},m=function(e,t){var n=new p.a.Object("Image"),r=new p.a.File(t,e);return n.set("filename",t),n.set("owner",p.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},y=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,i=new p.a.Query("Image");return i.limit(o),i.skip(n*o),i.descending("createdAt"),i.equalTo("owner",p.a.User.current()),new Promise((function(e,t){i.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},g=function(e){var t=p.a.Object.createWithoutData("Image",e);return new Promise((function(e,n){t.destroy().then((function(t){return e(t)})).catch((function(e){return n(e)}))}))},w=new(b=function(){function e(){Object(c.a)(this,e),Object(i.a)(this,"currentUser",f,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=d()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(s.a)(b.prototype,"currentUser",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(s.a)(b.prototype,"pullUser",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"pullUser"),b.prototype),Object(s.a)(b.prototype,"resetUser",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"resetUser"),b.prototype),b);w.pullUser();var v,x,U,P,k,z,D,F,C,N,S,I,L=w,M=new(v=function(){function e(){Object(c.a)(this,e),Object(i.a)(this,"filename",x,this),Object(i.a)(this,"file",U,this),Object(i.a)(this,"serverFile",P,this),Object(i.a)(this,"isUploading",k,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){m(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){o.b.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){return e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),x=Object(s.a)(v.prototype,"filename",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),U=Object(s.a)(v.prototype,"file",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=Object(s.a)(v.prototype,"serverFile",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=Object(s.a)(v.prototype,"isUploading",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(s.a)(v.prototype,"setFilename",[u.f],Object.getOwnPropertyDescriptor(v.prototype,"setFilename"),v.prototype),Object(s.a)(v.prototype,"setFile",[u.f],Object.getOwnPropertyDescriptor(v.prototype,"setFile"),v.prototype),Object(s.a)(v.prototype,"upload",[u.f],Object.getOwnPropertyDescriptor(v.prototype,"upload"),v.prototype),Object(s.a)(v.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(v.prototype,"reset"),v.prototype),v),H=new(z=function(){function e(){Object(c.a)(this,e),Object(i.a)(this,"list",D,this),Object(i.a)(this,"isLoading",F,this),Object(i.a)(this,"hasMore",C,this),Object(i.a)(this,"page",N,this),this.limit=10,Object(u.m)(this)}return Object(a.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,y({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){o.b.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25",e)})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}},{key:"delete",value:function(e){return new Promise((function(t,n){g(e).then((function(e){o.b.success("\u56fe\u7247\u5220\u9664\u6210\u529f"),t(e)})).catch((function(e){return o.b.error("\u5220\u9664\u5143\u7d20\u5931\u8d25")}))}))}}]),e}(),D=Object(s.a)(z.prototype,"list",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=Object(s.a)(z.prototype,"isLoading",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=Object(s.a)(z.prototype,"hasMore",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),N=Object(s.a)(z.prototype,"page",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(s.a)(z.prototype,"append",[u.f],Object.getOwnPropertyDescriptor(z.prototype,"append"),z.prototype),Object(s.a)(z.prototype,"find",[u.f],Object.getOwnPropertyDescriptor(z.prototype,"find"),z.prototype),Object(s.a)(z.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(z.prototype,"reset"),z.prototype),Object(s.a)(z.prototype,"delete",[u.f],Object.getOwnPropertyDescriptor(z.prototype,"delete"),z.prototype),z);window.x=L;var A=new(S=function(){function e(){Object(c.a)(this,e),Object(i.a)(this,"values",I,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){console.log("\u767b\u5f55\u4e2d...");var e=this.values,t=e.username,n=e.password;return new Promise((function(e,r){h(t,n).then((function(t){o.b.success("\u767b\u5f55\u6210\u529f"),L.pullUser(),e(t)})).catch((function(e){o.b.error("\u767b\u5f55\u5931\u8d25"),L.resetUser(),r(e)}))}))}},{key:"logout",value:function(){o.b.success("\u6ce8\u9500\u6210\u529f"),O(),M.reset(),L.resetUser(),H.reset()}},{key:"register",value:function(){console.log("\u6ce8\u518c\u4e2d...");var e=this.values,t=e.username,n=e.password;return new Promise((function(e,r){j(t,n).then((function(t){o.b.success("\u6ce8\u518c\u6210\u529f"),L.pullUser(),e(t)})).catch((function(e){o.b.error("\u6ce8\u518c\u5931\u8d25"),L.resetUser(),r(e)}))}))}}]),e}(),I=Object(s.a)(S.prototype,"values",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(s.a)(S.prototype,"setUsername",[u.f],Object.getOwnPropertyDescriptor(S.prototype,"setUsername"),S.prototype),Object(s.a)(S.prototype,"setPassword",[u.f],Object.getOwnPropertyDescriptor(S.prototype,"setPassword"),S.prototype),Object(s.a)(S.prototype,"login",[u.f],Object.getOwnPropertyDescriptor(S.prototype,"login"),S.prototype),Object(s.a)(S.prototype,"logout",[u.f],Object.getOwnPropertyDescriptor(S.prototype,"logout"),S.prototype),Object(s.a)(S.prototype,"register",[u.f],Object.getOwnPropertyDescriptor(S.prototype,"register"),S.prototype),S);window.b=L;var E=Object(r.createContext)({AuthStore:A,UserStore:L,ImageStore:M,HistoryStore:H});window.stores={AuthStore:A,UserStore:L,ImageStore:M,HistoryStore:H};var J=function(){return Object(r.useContext)(E)}}},[[112,6,7]]]);
//# sourceMappingURL=main.764d72ad.chunk.js.map